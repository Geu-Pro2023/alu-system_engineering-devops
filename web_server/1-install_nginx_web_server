#!/usr/bin/env bash

# Update package list and install nginx with the '-y' flag
apt-get update
apt-get install -y nginx

# Create a basic HTML page containing the string "Holberton School"
echo "Holberton School" > /var/www/html/index.html

# Ensure nginx is listening on port 80
printf %s "server {
     listen      80 default_server;
     listen      [::]:80 default_server;
     root        /var/www/html;
     index       index.html index.htm;
}
" > /etc/nginx/sites-available/default

# Restart nginx to apply changes
service nginx restart

# Ensure nginx is running and active
if service nginx status | grep -q "active (running)"; then
    echo "Nginx is running and configured successfully."
else
    echo "There was an issue configuring Nginx. Please check the logs for more information."
    cat /var/log/nginx/error.log
fi

# Check the content of the page
if curl -s localhost | grep -q "Holberton School"; then
    echo "Page content check passed."
else
    echo "Page content check failed. Please review the content of the HTML page."
fi

